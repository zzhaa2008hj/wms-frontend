<template>
  <div class="controlbar">
    <a class="btn btn-small btn-success" click.delegate="addInvoice()" required-permissions="C000047">新增发票</a>
    <a class="btn btn-small btn-success" click.delegate="requisition()" required-permissions="U000052">汇款申请单</a>
    <div class="spacer"></div>
  </div>
  <ak-grid k-data-source.bind="dataSource" k-reorderable.bind="true" k-on-change.delegate="selectionChange($event)">
    <ak-col k-selectable.bind="true" k-width.bind="30"></ak-col>
    <ak-col k-field="invoiceType == 1 ? '普通发票': '增值税发票'" k-title="发票类型"></ak-col>
    <ak-col k-field="invoiceNumber" k-title="发票号"></ak-col>
    <ak-col k-field="amount" k-title="发票金额"></ak-col>
    <ak-col k-field="verificationAmount" k-title="已核销金额"></ak-col>
    <ak-col k-title="操作" k-width.bind="250">
      <ak-template>
        <button class="btn btn-small" click.delegate="view(id)" required-permissions="R000085">查看核销</button>
        <button class="btn btn-primary btn-small" click.delegate="add($this)" required-permissions="C000048">新增核销</button>
        <button class="btn btn-danger btn-small" click.delegate="deleteInvoice(id)" required-permissions="D000018">删除发票</button>
      </ak-template>
    </ak-col>
  </ak-grid>
      <div class="pull-right">
        <a class="btn btn-white" click.trigger="cancel()">返回</a>
      </div>
</template>